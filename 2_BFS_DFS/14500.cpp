#include <bits/stdc++.h>
using namespace std;
#define MAX 510

int board[MAX][MAX];
int n, m;

int tetro[19][4][2] = {
    //1.
    {{0,0},{0,1},{0,2},{0,3}},
    {{0,0},{1,0},{2,0},{3,0}},

    //2. 
    {{0,0},{0,1},{1,0},{1,1}},

    //3. 
    {{0,0},{1,0},{2,0},{2,1}},
    {{0,0},{0,1},{0,2},{-1,2}},
    {{0,0},{0,1},{1,1},{2,1}},
    {{0,0},{0,1},{0,2},{1,0}},

    //3-1. 
    {{0, 0}, {1, 0}, {2, 0}, {2, -1}},
    {{0, 0}, {1, 0}, {1, 1}, {1, 2}},
    {{0, 0}, {1, 0}, {2, 0}, {0, 1}},
    {{0, 0}, {0, 1}, {0, 2}, {1, 2}},

    //4
    {{0,0}, {1,0},{1,1},{2,1}},
    {{0, 0}, {0, 1}, {-1, 1}, {-1, 2}},
    //4-1
    {{0, 0}, {1, 0}, {0, 1}, {-1, 1}},
    {{0, 0}, {0, 1}, {1, 1}, {1, 2}},
    //5
    {{0,0},{0,1},{0,2},{1,1}}, //ㅜ
    {{0,0},{0,1},{1,1},{-1,1}}, //ㅓ
    {{0,0},{0,1},{0,2},{-1,1}},//ㅗ
    {{0,0},{1,0},{2,0},{1,1}}, //ㅏ
};

//함수 목록
void input();

int main() {
    input();

    int res = 0;

    for (int tc = 0;tc < 19;tc++) {
        for (int i = 0;i < n;i++) {
            for (int j = 0;j < m;j++) {
                int sum = 0;
                for (int t = 0;t < 4;t++) {
                    int dirX = i + tetro[tc][t][0]; //이게 point
                    int dirY = j + tetro[tc][t][1]; //이게 point

                    if (dirX < 0 || dirY < 0 || dirX >= n || dirY >= m) {
                        sum = 0;
                        break;
                    }
                    sum += board[dirX][dirY];
                }
                res = max(sum, res);
            }
        }
    }

    cout << res << "\n";

}


void input() {
    cin >> n >> m;
    for (int i = 0;i < n;i++) {
        for (int j = 0;j < m;j++) {
            cin >> board[i][j];
        }
    }
}